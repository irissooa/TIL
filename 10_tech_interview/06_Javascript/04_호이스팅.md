# 04. 호이스팅

<br>

---

- 호이스팅 : 함수 안에 있는 선언들을 모두 끌어올려서 해당 함수 유효 범위의 최상단에 선언하는 것
- var는 **함수 스코프의 최상단으로 호이스팅** 되고 선언과 동시에 `undefined` 로 초기화 된다.
- let과 const는 **블록 스코프의 최상단으로 호이스팅** 되고 선언만 되고 값이 할당되기 전까지 어떤 값으로도 초기화되지 않는다.

---

<br>

## (1) 호이스팅 개념

- 자바스크립트 파서가 함수 실행전 해당 함수를 한 번 훑는다.
- 함수 안에 존재하는 변수 및 함수 선언에 대한 정보를 기억하고 있다가 실행한다.
- 유효 범위 : 함수 블록 `{}` 안에서 유효
- 즉, 함수 내에서 아래쪽에 존재하는 내용 중 핑료한 값들을 끌어올린다.
- 실제로 코드가 끌어올려지는 건 아니며, 자바스크립트 Parser 내부적으로 끌어올려서 처리하는 것이다.
- 실제 메모리에서는 변화가 없다.
- 변수와 함수를 위한 메모리 공간을 확보하는 과정

<br>

## (2) 호이스팅 대상

- var 변수 선언과 함수선언문에서만 호이스팅이 일어난다.
  - var 변수/함수의 선언만 위로 끌어 올려지며, 할당은 끌어 올려지지 않는다.
  - let/const 변수 선언과 함수표현식에서는 호이스팅이 발생하지 않는다.

- 주의해야 할 점
  - 함수 선언문은 함수 자체가 끌어올려지고 변수에 할당된 함수 표현식은 변수 선언만 끌어올려지기 때문에 주의해야 한다.
  - 함수 표현식의 선언이 호출보다 위에 있는 경우 - 정상 출력
  - 함수 표현식의 선언이 호출보다 아래에 있는 경우 (var 변수에 할당) - `TypeError`

- 또한 `let`, `const`는 호이스팅이 되지 않는다.
  - 그렇기 때문에 해당 변수의 `is not defined` 오류가 발생한다.

:heavy_check_mark: <b>`var`, `let` 할당 과정</b>

- `var` : `선언 + 초기화` => `할당`
- `let` : `선언` => `TDZ(Temporal Dead Zone, 임시적 사각지대)` => `초기화`  => `할당`

<br>

## (3) 호이스팅 우선순위

- 같은 이름의 var 변수 선언과 함수 선언에서의 호이스팅
  - 변수 선언이 함수 선언보다 위로 끌어올려진다.
- 값이 할당되어 있지 않은 변수와 값이 할당되어 있는 변수에서의 호이스팅
  - 값이 할당되어 있지 않은 변수의 경우, 함수 선언문이 변수를 덮어쓴다.
  - 값이 할당되어 있는 변수의 경우, 변수가 함수 선언문을 덮어쓴다.

<br>

## (4) 호이스팅 사용 시 주의

- 코드의 가독성과 유지보수를 위해 호이스팅이 일어나지 않도록 한다.
  - 호이스팅을 제대로 모르더라도 함수와 변수를 가급적 코드 상단부에서 선언하면, 호이스팅으로 인한 스코프 꼬임 현상은 방지할 수 있다.
  - let/const를 사용한다.
- var를 쓰면 혼란스럽고 쓸모없는 코드가 생길 수 있다. 그럼 왜 var와 호이스팅을 이해해야 할까?
  - ES6를 어디에서든 쓸 수 있으려면 아직 시간이 더 필요하므로 ES5로 트랜스컴파일을 해야한다.
  - 따라서 아직은 var가 어떻게 동작하는지 이해하고 있어야 한다.

<br>

---

:page_facing_up: <b>Reference</b>

- https://gmlwjd9405.github.io/2019/04/22/javascript-hoisting.html

---

