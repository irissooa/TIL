# 03. 스코프

<br>

## (1) 정의

- 자바스크립트 엔진이 참조의 대상이 되는 식별자를 검색할 때 사용되는 규칙의 집합
- 변수의 유효 범위
- JS는 함수 레벨 스코프를 따른다. 함수 레벨 스코프란 함수 코드 블록 내에서 선언된 변수는 함수 코드 블록 내에서만 유효하고 함수 외부에서는 유효하지 않다(참조할 수 없다)는 것이다.
  - 단, ECMAScript 6에서 도입된 `let` keyword를 사용하면 **블록 레벨 스코프**를 사용할 수 있다.

<br>

## (2) Lexical Scope

- **프로그래머가 코드를 짤 때, 변수 및 함수/블록 스코프를 어디에 작성하고 선언하였는가에 따라 정해지는 스코프** (어디서 호출하는지가 아님)
- 자바스크립트는 렉시컬 스코프를 따르므로 함수를 선언한 시점에 상위 스코프가 결정된다. 함수를 어디에서 호출하였는지는 스코프 결정에 아무런 의미를 주지 않는다. 

<br>

## (3) Scope Chain

- **현재 스코프에서 식별자를 검색할 때 상위 스코프를 연쇄적으로 찾아나가는 방식** 을 말한다. 
- 생성될 때마다 LexicalEnvironment가 만들어지고 그 안에 outer 참조 값이 있다는 것을 알 것이다.
  - 바로 이 outer 참조 값이 상위 스코프의 LexicalEnvironment를 가리키기 때문에 이를 통해 체인처럼 연결되는 것이다.

- 검색 방식
  - 현재 실행 컨텍스트의 LexicalEnvironment의 EnvironmentRecord에서 식별자를 검색한다.
  - 없으면 outer 참조 값으로 스코프 체인을 타고 올라가 상위 스코프의 EnvironmentRecord에서 식별자를 검색한다.
  - 이를 outer 참조 값이 `null` 일 때까지 계속하고 찾지 못한다면 에러를 발생시킨다.