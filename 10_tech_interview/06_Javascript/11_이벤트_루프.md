# 11. 이벤트 루프

<br>

## 태스크 큐(Task queue)와 마이크로태스크 큐(Microtask queue)

자바스크립트의 실행 환경은 2가지 큐를 가지고 있으며 **각각 스크립트 실행, 이벤트 핸들러, 콜백함수 등의 태스크(Task) 담기는 공간이다.** 태스크가 콜백함수라면 그 종류에 따라 다른 큐에 담기며 대표적인 예로는 다음과 같은 것들이 있다.

- 태스크 큐
  - `setTimeout()` , `setInterval()` , UI 렌더링, `requestAnimationFrame()`
- 마이크로태스크 큐
  - Promise, MutationObserver

이벤트 루프는 2개의 큐를 감시하고 있다가 콜 스택이 비게 되면, 콜백함수를 꺼내와서 실행한다. 이 때 **마이크로태스크 큐의 콜백함수가 우선순위를 가지기 때문에** 마이크로태스크 큐의 콜백함수를 전부 실행하고 나서 태스크 큐의 콜백함수들을 실행한다. (단, UI 렌더링이 태스크 큐에 속하기 때문에 마이크로태스크 큐의 태스크가 많으면 렌더링이 지연될 수 있다.)

- 콜스택을 감시하다가 콜스택이 비어있으면 이벤트 루프는 콜백큐의 첫번째 이벤트를 콜스택으로 날린다.

---

:exclamation: 이벤트 루프와 관련된 내용은 이미지상으로 익히면 더 쉽기 때문에 아래 홈페이지를 참고하면 좋다. 자바스크립트를 공부한다면 반드시 알아두어야 하는 내용이므로 꼭 익혀두자!

- https://im-developer.tistory.com/113

---

