# 02. 실행 콘텍스트

<br>

## (1) 정의

- <b>코드의 실행환경에 대한 여러가지 정보를 담고 있는 개념</b>
- Context : 코드 흐름상의 배경이 되는 조건 / 환경
- Execution : 동일한 조건 / 환경을 지니는 코드 뭉치
- 실행 콘텍스트 : <u>동일한 조건 / 환경을 지니는 코드 뭉치(함수 or 전역 공간)</u>를 <u>실행할 때 필요한 조건 / 환경정보</u> => 함수에 의해서만 별개의 컨텍스트를 구분할 수 있다.
- 결국 실행 콘텍스트는 <b>함수를 실행할 때 필요한 환경정보를 담은 객체</b>라고 할 수 있다.
  - 실행할 때 필요한 환경정보 : 변수, 함수 선언, 변수의 유효범위, this

<br>

## (2) 종류

- 엔진이 스크립트 파일을 실행하기 전에 **글로벌 실행 컨텍스트(Global Execution Context, GEC)** 가 생성되고, 함수를 호출할 때마다 **함수 실행 컨텍스트(Function Execution Context, FEC)** 가 생성된다.
- 주의할 점은, 글로벌의 경우 실행 이전에 생성되지만 함수의 경우 호출할 때 생성된다는 점이다.

<br>

## (3) 콜 스택

- 현재 어떤 함수가 동작하고 있는지, 다음에 어떤 함수가 호출되어야하는지 등을 제어하는 자료구조
- 실행 컨텍스트가 생성되면 흔히 콜 스택(Call Stack)이라고도 불리는 실행 컨텍스트 스택에 쌓이게 된다.
- GEC는 코드를 실행하기 전에 쌓이고 모든 코드를 실행하면 제거된다.
- FEC는 호출할 때 쌓이고 호출이 끝나면 제거된다.

<br>

## (4) 구성 요소

- VariableEnvironment
  - LexicalEnvironment의 초기 수집 정보(snapshot 개념)
  - 처음에 값만 유지하고 그 뒤에 값이 바뀌어도 반영되지 않는다.
- LexicalEnvironment
  - environmentRecord(현재 문맥의 식별자 정보)와 outerEnvironmentReference로 구성
  - VariableEnvironment와 같은 데이터를 들고 있지만 값이 바뀌지 않는다는 특징이 있다.
- this binding

<br>

## (5) hoisting

- 실행 콘텍스트 맨 위로 식별자 정보를 끌어올린다.
- 참고로 함수 선언문은 다른 것들과 달리 함수 전체를 끌어올린다.(이것만 따로 암기)
- environmentRecord : 현재문맥의 식별자(hoisting)
- outerEnvironmentReference : 현재 문맥에 관련 있는 외부 식별자 정보 => `scope chain`
  - 자기 자신과 가장 가까운 스코프 범위의 변수 값만 가져올 수 있다.

<br>

## (6) 스코프 vs 실행 컨텍스트

- 스코프(scope) : <i>유효범위(변수)</i>
  - 스코프는 <b>정의</b>될 때 결정된다.

- 실행 컨텍스트(execution context) : <i>실행되는 코드덩어리(추상적 개념)</i>
  - 실행 컨텍스트는 <b>실행</b>될 때 생성된다.
  - 실행 컨텍스트에는 호이스팅, this 바인딩 등의 정보가 담긴다.
  - 사용자가 함수를 호출했을 때 외부적으로 해당 함수를 실행하기 위해 필요한 정보를 불어 모아 놓은 것